/* Tar Heel SHell
 *
 * This file implements a table of builtin commands.
 */

#include "thsh.h"
#include <stdlib.h>

struct builtin {
    const char * cmd;
    int (*func)(char *args[MAX_ARGS], int stdin, int stdout, history *myhistory);
};


static char old_path[MAX_INPUT];
static char cur_path[MAX_INPUT];
//static char usr_path[MAX_INPUT];

/* This function needs to be called once at start-up to initialize
 * the current path.  This should populate cur_path.
 *
 * Returns zero on success, -errno on failure.
 */
int init_cwd(void) {

    // Lab 2: Your code here

    return 0;
}

/* Handle a cd command.  */
int handle_cd(char *args[MAX_INPUT], int stdin, int stdout, history *myhistory) {
    if (strcmp(args[1], "..") == 0) {
        // Case: ".."
        getcwd(cur_path, sizeof(cur_path));
        for (int i=strlen(cur_path)-1; i >= 0; i--) {
            if (cur_path[i] == '/') {
                strcpy(old_path, cur_path);
                cur_path[i] = '\0';
                chdir(cur_path);
                break;
            }
        }
    } else if (strcmp(args[1], ".") == 0) {
        // Case: "."
        strcpy(old_path, cur_path);
        chdir(cur_path);
    } else if (strcmp(args[1], "-") == 0) {
        // Case: "-"
        if (strlen(old_path) > 0) {
            chdir(old_path);

            char temp[MAX_INPUT];
            strcpy(temp, cur_path);
            strcpy(cur_path, old_path);
            strcpy(old_path, temp);
        }
    } else {
        // Case: a directory potentially in reach
        // Lets check if we can get to it first
        int rv = chdir(args[1]);
        
        if (rv == 0) {
            // chdir was valid! Lets move stuff around
            strcpy(old_path, cur_path);
            getcwd(cur_path, sizeof(cur_path));
        } else {
            // chdir was invalid! Return error.
            return -1;
        }
    }
    return 42;
}

/* Handle an exit command. */
int handle_exit(char *args[MAX_ARGS], int stdin, int stdout, history *myhistory) {
    // Save the history before exiting 
//    remove("thsh_history.txt");
//    save_history(myhistory);

    exit(0);
    return 0; // Does not actually return
}

int handle_goheels(char *args[MAX_ARGS], int stdin, int stdout, history *myhistory) {
    printf("YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY55Y55\n");
printf("YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY\n");
printf("YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY\n");
printf("YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY5555555YYYYYY55555555555555555555YYYYYYYYYYYYYYYYYYYYYYYYYYYY5YYYY55555555555YYYYYYYYYYYYYYYYYYYYY\n");
printf("YYYYYYYYYYYYYYYYYYYYYYYYYYYJJ?77!!!!!!!!!77?JJYYYYYYYYYYYYYYYYYYYYYYYY55YY55555555PPPPPP55PPPGGGGPPPGGGBGBGGGPPPP55Y55PPP5YYYYYYYY5YYYYY5555YYYYJJJJJJJJYYY5555YYYYYYYYYYYYYYY5\n");
printf("YYYYYYYYYYYYYYYYYYYYYYYJ7!~^^::::::::::::::::^^~!7JYY5YYYYY5555Y5555555555555PPGGGGGBBBBGGBBBBBGBBBBBBGBBBBBGGGGGGGGGGPGG555YYYY5YY555YYJ?7!!~~^^^^^^^^^^^~!7?JYY55YYYYYYYYYYYY\n");
printf("YYYYYYYYYYYYYYYYYYYY?!~^::::::::::::::::::::::::::^^~7JY555555555PPGGGGGGGGGGGGGBBGBBBBBBBBBBBBBBBBB#BBBBBBBBBBGGGB##BGGGP55555555YJ?7!~^^:::::::::::::::::::::^~7J55YYYYYYYYYY\n");
printf("YYYYYYYYYYYYYYYYYY7~^:::::::::::::::::::::::::::::::::^~7J5PPPGGGGGGGGGGGGBBBGGBBBBBBBBBBBGGGBBBBBBBBBBBBBBBB#BBBBB###BGGGPPP555J7~^^:::::::::::::^^^^^^::::::::::^!JY5YYYYYYYY\n");
printf("YYYYYYYYYYYYYYYY?~^::::::::::^^^^^^^^^^^^^^::::::::::::::^!JPGGGGGGGGGGGGGBBBBBBBBBBBGGGGBBGGGGBBBGGBBBBBBBBBBBBBBBBB###BBBBG5?~^^:::::::::::^^^^^^^^^^^^^^^:::::::::~J5YYYYYYY\n");
printf("YYYYYYYYYYYYYYY!^:::::::::^^^~~~~~~~~~~~~^^^^^^::::::::::::^!JPGGGGGGGGGGBBBBBBBBGGGGGGGGGBBBBBBBBBBBGBBBBBBBBBBBBB#BBBBB#B57^^:::::::::::^^^^^^^^~~~~~~^^^^^^::::::::^7Y5YYYYY\n");
printf("YYYYYYYYYYYYYY!^::::::::^^~~!??JJJJJJJJ?7!!~~^^^^^::::::::::^^75BBGGGGGBBBBBBBBBBGBGGGGGGGGGGGGGGBGGGGGGGGGGGGGGGBBBBBBBB57^^:::::::::::^^^^~~~!!!777??77!!~~^^^::::::::!YYYYYY\n");
printf("YYYYYYYYYYYYY!^:::::::^^^!?JYYYYYYYYY555YYJ?7!~~^^^^::::::::^^!?5GGGGGBBBBBBBBBBGGGGGGGGGGGGGBBBBGGGGGPPPPPGGGGGGGGGGGBG?~^^::::::::::^^^^~~!7?JYY5555555YYJ?!~^^::::::::75YYYY\n");
printf("YYYYYYYYYYYY7^^::::::^^~7Y5YYYYYYYYYYYYYY5555Y?!~~^^^^::::::^~!7YGBGGGGGBBBBBGGGGPPP5PPPPPGGGGGBBBGGGPPPPGGGGGGGGBGGGBB?^^^:::::::::^^^~~!?JY5555555555555555Y7~^^:::::::^J5YYY\n");
printf("YYYYYYYYYYYY!^^::::::^~?5YYYYYYYYYYY5555555Y55PPJ!~~^^^^:::^~~!?5GGGGGPGGGGPPP5555YYY55555PPGGGGGGGPP5P55555PPPGGBBBBGJ!^^::::::::^^^~~7J5555555555555555555555?~^^::::::^?55YY\n");
printf("YYYYYYYYYYYJ~^::::::^^!YYYYYYYYYYYYYYYY55555555PBP?~~~^^^^^^!~7J555555555555YJJJ????????JJJYY5PPP55555YYJJYY55PGGBBBBPJ!~^::::::^^^~~!JGGP5555555555555555555555!~^::::::^75YYY\n");
printf("YYYYYYYYYYYJ~^^:::::^^!YYYYYYYYYYYYYY55555555YJYYGBJ!~~~^^~~!77J55YJJJJJJJJ?7777!!!!!!!!!!!7??????77777?7777??J5PBBBGP5?!^^:::^^^^~~7PBBBP55555555555555555555557~^::::::^75YYY\n");
printf("YYYYYYYYYYYY!^^::::::^!YYYYYYYYY5555555555YJ?7?YY5G#57!~~~~!7?JJJ??????????7777777777777777??????7!~~^~~~~~~~!!!7JPGPPPY7~^^^^^^^~~JB###BG55555555555555555555557^^::::::^?5YYY\n");
printf("YYYYYYYYYYYY7~^::::::^^?5Y5YY5555555555Y??7!~~~7?JPB#P7!!!!!7777!!!!7????????????????????????????7~~^^^^~^^~~~~~~!7Y5PPY7~^^^^^~~!Y######G555555555555555555555J~^::::::^~Y5555\n");
printf("YYYYYYYYYYYYY!^^::::::^~?Y555555555555J!~~~^^^^^~~!G##PJ7777!!!!~~!77??????????????????????????????7!~^^^^^^~~~~~~!7?J??7!~~~~~!7P####BGY???JYYYY5555555555555Y!^^:::::^^?55555\n");
printf("YYYYYYYYYYYYYJ!^^:::::::^!?Y55555555?!^::::^:^^^^~~5#BBB5?7!!!~~!7???????????????7~^~~~~?????????????7!^^^^^^^^~~~~~~~~~!!7!!!!7P&####?~~~^^^~^^~~!?Y5555555Y?~^^:::::^^7555555\n");
printf("YYYYYYYYYYYYYYJ!~^^:::::::^^!7????7~:::::::^^^^~~!Y####BY!!!~~~7???????7??????????7!^^^^!??????77??7!^^^^^^^^^^^^~~~~~~~~~!7??YB&#B###5!~~^^^^^^^^^^~J55YYJ7~^^:::::^^~75555555\n");
printf("YYYYYYYYYYYYYYYY?!~^^:::::::::::::::::::::^^^!?YPB&&&&P?!!!!~~7??????7~~7???????????7!^:!?????7^^~~^:^^^^^^^^^^^^~~~~~~~~~!!!?5GGBBB###5!~~~~^^^^^^^^^~~~^^:::::::^^^!J55555555\n");
printf("YYYYYYYYYYYYYYYY5Y?!~~^^^^:::::::::::::^^^~!?P#&&&#&#Y7!!!!~~~7?????7^^^!?????????????7~!?????7:::~::^^^^^^^^^^^^~~~~~~~~!!!!!!7YPGBBB##G5J7~~^^^^^^^::::::::::^^^~!?Y555555555\n");
printf("YYYYYYYYYYYYYYYY555YJ?7!~~~^^^^^^^^^^^~~!?J5PPB###&#Y77!!!~~~~7??????~^^~???????7?????????????7::^!~^:^^^^^^^^^^^~~~~~~~!!!!!!!77YPGBBBB###BP?!~~^^^^^^^^^^^^^^~!7JY55555555555\n");
printf("YYYYYYYYYY5Y555Y5555555YYJJ?77777777?JJY5555PPPGB#&57?7!!!~~~~!7??????7~!??????:^!7??????????????7??~^^^^^^^^^^^^~~~~!!!!!!!!!!!7?Y5GBGBB#B###GY?7!!~~~~~~!!77?YY55555555555555\n");
printf("YYYYYYYY55YY55555555555555555555555555555555PPPGB#G???7!!!!~~~~~7?????????????7~^:^!?????????????????77^^^^^^^^^^^~~!!!!!!!!!!!7?JY5PGBGBB#######BGP5YYYYYY55555555555555555555\n");
printf("YYYY5YY555YYY5555555555555555555555555555555PPGB#GJ???7!!!!~~~~~~~7????????????J77!!?????????????????7~^^^^^^^^^^~~~!!!!!!!!~!!7?JY5PPGBBBB#####BBBGP55555555555555555555555555\n");
printf("YYYY5YY5555555555555555555555555555555555555PGBBGJ??J?7!!!!~~~~~^^^^~!?????????????????????????????~^^^^^^^^^^^^~~~!!!!!!!!!!!7?JYY5PGGBBB######BBGP555555555555555555555555555\n");
printf("YYY55555555555555555555555555555555555555555GBGGYJJJJ?77!!!~~~~~~^^^^!????????????????????????????~::^^^^^^^^^^~~~~!!!!!!!!!!!7JYYY5GGGBB########BBGPPP555555555555555555555555\n");
printf("5555555555555555555555555555555555555555555PGGBPJJJJJ?777!!!!!~~~~~^~777?!?!~^~~~~~~~~~~~~~!7?77!~^^^^^^^^^~~~~~~!!!!!!!!!!!!!7J5YY5PGBBB##########BGPP555555555555555555555555\n");
printf("555555555555555555555555555555555555555555PGGBB5JJ?J????JJ?JJ???77!!~~~~~~~^^^^^::^:^^^~~~^~!!!!!!!!!~~!!!!77!!~~!!!!!!!!!!!!!!?Y5Y5PGBBBBBB########BGP555555555555555555555555\n");
printf("555555555555555555555555555555555555555555PGB##YJJ?JJJJYY555P5555YJ??7!!!~~~^^^^^^^^^~~!!!!7?JJY55555YJ????????7!!!!!!!!!!!!!!77?5P55PGB#BBBBB#######G5555555555555555555555555\n");
printf("555555555555555555555555555555555555555555GB###Y??J55YYYYJJJJJJJYYYJJJ?77!!~~~^^^^~~~!!!!77??JJJYJJJJ???7777777777777!!!!!!!77777YPPPPBBB#B##########G5555555555555555555555555\n");
printf("55555555555555555555555555555555555555555PGB#&#YYYPP555YYJJ????????JJJJJJ?7!!~^^^^~!!777????77777!!~~~~~~~~~!!!!7??77!!!!!!!!!!!7?PGGGBBBBB##########G5555555555555555555555555\n");
printf("5555555555555555555555555555555555555555PGBB###BBBGGPPP55PPPPPPPP5YJY5555YYJ7!~^^~~!?JYYYYYYY5YJJYYYYYY55555555YJJJJJ???7777777?J5B#BBBBBBB#########BP5555555555555555555555555\n");
printf("5555555555555555555555555555555555555555P####G55555YYYY55PPPPPPPP5555P55PGG#BB5PP5YY5555YYYY5YYJJJY55PPGGPP555555P####BBGGBBBBB##&&&&#&########BB####P5555555555555555555555555\n");
printf("55Y5555555555555555555555555555555555555PGB##55PP5555PPPP5YYGGG5PPPP5Y555G##&&#BBBGG5JJYYYYYYY?7!!J5YPGGGGGPPPP5YJP##&##GGBBBBBBB##&&#&&####BGGGGGBBBG5555555555555555555555555\n");
printf("5555555555555555555555555555555555555555555BB555555PPGGP5?7?5P555P55J?JYYPB#Y?77?5BBY????JY???7!~~!Y55PPPP5Y5PPPP5Y##5JJJJJJJJJJJJ5GBBBBB#BB5YYPPP5GGP5555555555555555555555555\n");
printf("5555555555555555555555555555555555555555555GB5YY555PPP5YJ??77JJJJ????JJJJG#Y!~~^^~YBP?77777???7777!777?JJJ??JY5YYYY#G7777777777777?YPGGGGPPP5Y5555J5P55555555555555555555555555\n");
printf("555555555555555555555555555555555555555555PGBPJJYY555YJ?7777777???JJJJJ?Y#G?!~~^~!7PGJ77!!7777???777!!!!!7777???JJY#Y!!777777!!!777J5GGGGP555JYYYY?Y555555555555555555555555555\n");
printf("5555555555555555555555555555555555555555PPGGBGJ?JJYYYJ??77777777?????77Y#GJ7!~~~~!7JGP?!!!!~!!!!!!!!!!!!!!!7777???5B!!!!!!!!!!!!77??5GGBGG55YJJYJ??5555555555555555555555555555\n");
printf("555555555555555555555555555555555555555PPPBBBBP??JJYYJ?77!!!!!!!!!!!!!YBG??7!~~~~!77JGG?!~~~^~~~~~~~~~~~~~!!77777?BY~!!!!!!!!!!7777?YPGGGG5YJ?JJJ?Y5555555555555555555555555555\n");
printf("55555555555555555555555555555555555555P5PPBBBBB5?????77!!~~~~~~~!!!!?PB5???7!~~~~!!77?PGY!~^^^^^^^^^^^^^^~~!!!!!7PP!!!!!!!!!7!77777?Y5GGGGPJ?77???J5555555555555555555555555555\n");
printf("5555555555555555555555555555555555555555PPGBBBPPGP5YYJJJ???????JJYPGGPJ7??7!!~~~~!!!!77JPPY?7!~^^^^^^^^^^^~~!!7JP57!!!!!!!!!7777777?J5PPPP55J7~!7!J5555555555555555555555555555\n");
printf("555555555555555555555555555555555555555PPPGBGB5JJJJYY555PPPPPP5555YYJ????77!~~~~~~!!7777?Y55P5555YYYYYYYYYY555YJ?!!!!!!!!!!!7777777?J5PP55YYY?!~77Y5555555555555555555555555555\n");
printf("55555555555555555555555555555555555555555PPGGG5JJJ???????????7777777?J??77!!~~~~~~~!!7777????7??????JJ?JJ???777!!!!!!!!!!!!!7777777?Y5P5PY?JJ?!!?7Y5555555555555555555555555555\n");
printf("555555555555555555555555555555555555555P5PPGGG5JJJ????777!!!!!!!!!7??77777~~^^^^~!!~!!!777??7777!!~~~~~~~~~~~~~~!!!!~!!!!!!77777777?Y5555JJJJ7!7??55555555555555555555555555555\n");
printf("5555555555555555555555555555555555555PPPPPPPGG5JJJ??77!!!!!~~!!!77??JJ????~~~~~^~!7777??????7!7777!!!~~^^^^^~^~~~~~!!!!!!!77777777?JY55Y5YJ?77777Y55555555555555555555555555555\n");
printf("5555555555555555555555555555555555555PPPPPPPGG5JJ???7!!!!!!!!!777777JY5YY?7777777?JY55555YJ7!!!!7777!~~~~~~~~~~~~!!!!!!!!7777777???Y5PP5JJ???777J555555555555555555555555555555\n");
printf("55555555555555555555555555555555555PPPPPPPPGGG5JJJ??77!!!!!!!!7777!7?JY5555YYYYY55PP5555YJ?7!~~~~!777!!~~~~~~~~~!!!!!!7!7777777???Y555P5JJYJ?77J5555555555555555555555555555555\n");
printf("555555555555555555555555555555555555PPPPPPPGGG5YJJ??7777!!!!!!!!!!7JJY5PGGGPP55555555PP55YJJ?7!!~~~!7?77!!!!!!!!!!!!!!!!7777777??YYYPPG5JYJ???YPP555555555555555555555555555555\n");
printf("5555555555555555555555555555555555P5PPPPPPPGGGPYJJ???777!!!!!!7!7JY55PGGGGGPPP555PPPPPGGGPP55Y??J??777??77!!!!!!!!!!!!!!7777777?J5555PG5YYYJJYPP5555555555555555555555555555555\n");
printf("5555555555555555555555555555555555PPPPPPPPGGGGPYJJ????777!!!77?JYPPPPGGGGGPGGG5YPPGPPPGGGPGP55YY55555YJ??7!!!!!!!!!!!!!!!777???JY555PPGP55P55PPPP555555555555555555555555555555\n");
printf("5555555555555555555555555555555P5PPPPPPPPPGGGGPYJJ???7777777JY5PPPPGPGGGGPP5Y??JY5PPPPPPGGP5555YY5PPP55YJJ!!!~~~~~~~!!!!!77???JYYYPPPGGGPGGGPPPP5555555555555555555555555555555\n");
printf("5555555555555555555555555555555555PPPPPPPPPGGGG5YJJ??77777?Y5P55PP55PPPPP55YJJ??JY55PPPPPP555555PPGGP5PPYY7~~~~~~~~~!!7!!7?JJJJ55PPGGGGGBGGPPPPP5555555555555555555555555555555\n");
printf("555555555555555555555555555555P5PPPPPPPPPPGGGGGP5YJJ??77?J55555YPGGBBPYY??JJJJJYJJJ?JJ7!7J7!JYJ5PPYJY5PPP57!!!!!!!!!!7!!!7??Y555PPPGGBBBGPPPPPPPP555555555555555555555555555555\n");
printf("5555555555555555555555555555P5P5PPPPPPPPPGGGGGGPP55YJJ?JYY555Y55PY5PP5YJ777~^^~!~^^^!7~~!???JJJJ7!!7J5GG5Y?7!!!77!!!!7!!7JJYYPPPPGGGGBBBGGGPPPPPPPP5555555555555555555555555555\n");
printf("5555555555555555555555555555555PPPPPPPPPPPGGGGGGGP555YJYY555PPGPY?JYYJJJJYJ?77777777?????????77!!!!7J5GGPY??777J?!!!!77?JJYPPPGPGGBBGBBBGGGPPPPPPPP5555555555555555555555555555\n");
printf("55555555555555555555555555P5PP55PPPPPPPPPPGBGGGGGGP55Y5555PPPGPY??JJJJ????77!!7777!!!!!777777!!!77?JYPGPP5J?J?JYJ??77?JJJY5PPGGGGBBBBBBBGGGPPPPPPPP5P55555555555555555555555555\n");
printf("5555555555555555555555555555PPPPPPPPPPPPPPGGGBBBGGGP555PPGGGPGPYJ??J?????7777777777!777777!!777?77J5PGGGG5YYYY5YJYJ??JY55PPGGGGGGBBBBBGGGPPPPPPPP5P5555555555555555555555555555\n");
printf("555555555555555555555555555PPPP5PPPPPPPPPPPGGGGBGGGGPPPGGGGGGGP55J?JYJJJJJJJYYYJJJJJJJJJJ???777?JY5PGGBGGP55PPPY55YYJ55PGGGGGGBBBGBBBGGGPPPPPPPPPPPP555555555555555555555555555\n");
printf("55555555555555555555555555555PPPPPPPPPPPPPPGGGGBBGBBGGGGGGGGGGGGP5YY5YYY555PPPPPP5PP55555YJ?7?JY5PGBBGBBGGGPGPPPP5YPPPGGGGBBGBBBBBBBGGGGPPPPPPPPPP55555555555555555555555555555\n");
printf("5555555555555555555555555555PPPPPPPPPPPPPGGGGGBBBGBGGGBGGGGBBBBBPP5YYYYYYYPPPPGPGPP55YYY55YJJJYPGGBBB###BBBBGGGPPPPGGPGBBBBBBBBBBBGGGGGPPPPPPPPPPPPPP55555555555555555555555555\n");
printf("5555555555555555555555555PPP5PPPPPPPPPPPPPPGGGBBBGGGBBBBBBBB##BBBG55YYYYYPP5PPGGPG55YYJYYY55555GBBB#####BBBBBGBGGGGGGBBBBBBBBBBBBGPPGPPPPPPPPPPPPPPP555555555555555555555555555\n");
printf("555555555555555555555555555PPPPPPPPPPPPPPPPPGGGBBBBBBBBB#######BGGPPPPPPGGGPGGBBPPPPPPPP5GPPGGGBB########BBBBBBBBBBBBBBBBBBBBBBGP55Y5PPPPPPPPPPPPPPP555555555555555555555555555\n");
printf("555555555555555555555555555PPPPPPPPPPPPPPPPPPGGBBBBBBB########BBGBBGGGGBGBBBBBBGGGGGGGGGPGGBGBGB##########BBBBBBBBB##B#BB##BBGP555YJ5PPPPPPPPPPPPPPP555555555555555555555555555\n");
printf("555555555555555555555555555PPPPPPPPPPPPPPPPPPGGGGBBBBB########BBGGGGBBGGBBBBBBGGBBBBGBGBPGBBBBGB###############BBBB##BBBBBBGGGPYYJ?JG5Y5PPPPPPPPPPPPPP5555555555555555555555555\n");
printf("55555555555555555555555555PPPPPPPPPPPPPPPPPPPPPPGGBBBBB#####BBBGPGGBBGBBBBBBBBGGBGBBBBBGGGGBBBB################B#BB#BBBGBGP5Y5YJ???JBY??J5PPPPPPPPPPP5P555555555555555555555555\n");
printf("555555555555555555555555PP5PPPPPPPPPPPPPPPPPPPPPGGGBBBB##B##BBPPGGBGGGBBBBBBBBBBBBBBBGPGPPGBBBB###&#####B######BBBBBBBGPPPYJJJ?????Y5?777?YPPPPPPPPPPP5P55555555555555555555555\n");
printf("555555555555555555555555PPPPPPPPPPPPPPPPPPPPPPPPPPGGGB#BBBBBGGBBGGBGGBBBBBBB#BBGBBBBBGGGGGBPGBB##########B####BB#BB#GGP5YYJJ?77???JY?777777J5PPPPPPPPPP555555555555555555555555\n");
printf("555555555555555555555555P5PPPPPPPPPPPPPPPPPPPPPPPPGGGGGB#BBBPB#BGBGGGBB#BBB#BBBBBBGBGGGGGBPPBBBBBB######B#####B#BGGGP5YJJ??777777?Y?77777777?YPPPPPPPPPP55555555555555555555555\n");
printf("555555555555555555555555P55PPPPPPPPPPPPPPPPPPPPPPPPPPGGBBBBBPBBBGGBGPBBBBBBBBBBBBGGGGBBGGP5GBB#BBB####BB#####BBGP5YYJJ???7777777?J?777!777!!77?5PPPPPPPP55555555555555555555555\n");
printf("555555555555555555555PP5P5PPPPPPPPPPPPPPPPPPPPPPPPPPPPPGGBBPGBBGBGBBGBBBBBBBBBGGGPGGBGGGPPGGGBBBB#BBBBBB###BGPP5YJJJ??777777!!7?J77!!!7777!!!!!7YPPPPPPP55555555555555555555555\n");
printf("555555555555555555555PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPGGGBPPBGGPGBBPBBBBBBGBBPGGGBGBGBPPPGGGBBBBBBBGGGPGGP5YYYJ???7777777!!!7??7!!!!!!!7!!!!!!!!J5PPPPPPP5P5555555555555555555\n");
printf("555555555555555555555PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP5PPPGG5PGBBPGBBBBBBBGGBBGPPGBGPP5PPBGGGGGGGGGP55YYJJ???7777777!!!!!??7!!!!!!!!!!7!!!!~!!!?5PPPPP55P5555555555555555555\n");
printf("555555555555555555555PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP55PPPPPGGGBBBBBBBBGGGGPPBBGGPPP5PGPBPPP5YYYJYJJ???77777!!!!!!!!7!?!!!!!!!!!!!!!!!!!~!!!!?5PPPPP555555555555555555555\n");
printf("555555555555555555555PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP5P5PPPPGBBBBBBBBBGPPPPPGGBPG5PPPPPPP5YYJJJJ????77777!!!!!!!!!7?7!!!!!!!!!!!!!!!!!!~~~~!!7JYY555PPP55555555555555555\n");
printf("55555555555555555PP5PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPGPPPP5Y5PGPPPGBGGBBBBG5555PGP5YPYYY5Y5YJJJJJ???7777777!!!!!!!!!7??7!!!!!!!!!!!!!!!!~~~~~~~~!!7?????JJY55555555555555555\n");
printf("555555555555555555PP5PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPGPP5Y5PBBP5PP5PPPGG5Y55YYYYYYYJJJJJJ??????77777777!!!!!!!!!!???7!!!!!!!!!!!!!!!!~~~~~~~~~~!!77!777777???JY55555555555\n");
printf("5555555555555555P55PPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPGGGGPYY5PP#B5YYJJYY55YYYYYYYJJJJJ????????77777!!!!!!!!!!!!!!!7??7!!!!!!!!!!!!!!!!!~~~~~~!~~~!!7!!!!!!7777777??JJY555555\n");
printf("\n\n\n+++++++++++++++++++++++++++++++++++++++++++++ ZOOOM OUT FOR SUPRISE !!! +++++++++++++++++++++++++++++++++++++ \n");
    return 42;
}


static struct builtin builtins[] = {{"cd", handle_cd},
    {"exit", handle_exit},
    {"goheels", handle_goheels},
    {"history", print_history},
    {"clear", clear_history},
    {NULL, NULL}};

/* This function checks if the command (args[0]) is a built-in.
 * If so, call the appropriate handler, and return 1.
 * If not, return 0.
 *
 * stdin and stdout are the file handles for standard in and standard out,
 * respectively. These may or may not be used by individual builtin commands.
 *
 * Places the return value of the command in *retval.
 *
 * stdin and stdout should not be closed by this command.
 *
 * In the case of "exit", this function will not return.
 */
int handle_builtin(char *args[MAX_ARGS], int stdin, int stdout, int *retval, history *myhistory) {
    int rv = 0;

    //Loop thru builtins and check for string matches, call appropriate function if we find match
    for (int i=0; builtins[i].cmd != NULL; i++) {
        if (strcmp(args[0], builtins[i].cmd) == 0) {
            *retval = builtins[i].func(args, stdin, stdout, myhistory);
            rv=*retval;
            break;
        }
    }  
    return rv;
}

/* This function initially prints a default prompt of:
 * thsh>
 *
 * Returns the number of bytes written
 */
int print_prompt(void) {
    int ret = 0;
    // Print the prompt
    // file descriptor 1 -> writing to stdout
    // print the whole prompt string (write number of
    // bytes/chars equal to the length of prompt)

    // Adding the current dir to the shell
    char cwd[280];
    cwd[0] = '[';
    char *pointer = &cwd[1];
    getcwd(pointer, sizeof(cwd));
    strcat(cwd, "] "); 
    strcat(cwd, "thsh> ");

    const char *prompt = cwd;

    // Lab 2: Your code here


    ret = write(1, prompt, strlen(prompt));
    return ret;
}
